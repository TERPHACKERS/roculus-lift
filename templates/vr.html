<html>
    <head>
        <script src="https://aframe.io/releases/latest/aframe.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.12/vue.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.1/plugins/BezierPlugin.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.1/TweenMax.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
    </head>
    <body>
      <a-scene>
        <a-sphere
          v-bind:position="spherePositionAttr"
          radius="1.25"
          color="#EF2D5E"
        ></a-sphere>
        <a-plane
          rotation="-90 0 0"
          width="4"
          height="4"
          color="#7BC8A4"
        ></a-plane>
      </a-scene>
    </body>

<script>
  const tween = TweenMax;

  var obj = {};
  var socket = io.connect("ws://dev.txtpen.com:5000/acc");
  socket.onevent = function (packet) {
      var args = packet.data || [];
      socket.onevent.call (this, packet);    // original call
      packet.data = ["*"].concat(args);
      socket.onevent.call(this, packet);      // additional call to catch-all
  };


  new Vue({
    el: 'body',
    data: {
      sphere: {
        position: {
          x: 1,
          y: 1,
          z: -1
        }
      },
      plane: {
        dimensions: {
          width: 4,
          height: 4
        }
      },
      sounds: {
        score: new Audio('../Static/beep.mp3')
      }
    },
    computed: {
      spherePositionAttr () {
        const pos = this.sphere.position;
        return `${pos.x} ${pos.y} ${pos.z}`;
      }
    },
    methods: {
      playScoreSound: function(){
        this.sounds.score.play()
      }
    },
    ready () {
      this.sounds.score.play()
      socket.on('*', (data)=>{
        console.log(data);
        obj = JSON.parse(data);
        this.sphere.position.z = obj.gamma;
      });
      // TweenMax.to(this.sphere.position, 1, {bezier:[{x:1, y:1}, {x:0, y:2}, {x:-1, y:1}, {x:0, y:0}, {x:1, y:1}], ease:Linear.easeNone, repeat: -1});
    }
  })
</script>

</html>
